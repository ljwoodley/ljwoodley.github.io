<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Eliot Spector" />
<meta name="author" content="Farhad Dastmalchi" />
<meta name="author" content="Laurence James-Woodley" />
<meta name="author" content="Nitya Singh" />


<title>Project Presentation</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="site_libs/anchor-sections-1.0/anchor-sections.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Laurence James-Woodley</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="Blog.html">BLOG</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ljwoodley">
    <span class="fa fa-github fa-2x"></span>
     
  </a>
</li>
<li>
  <a href="https://www.linkedin.com/in/laurencejwoodley/">
    <span class="fa fa-linkedin fa-2x"></span>
     
  </a>
</li>
<li>
  <a href="mailto:laurencejwoodley@gmail.com">
    <span class="fas fa fas fa-envelope fa-2x"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Project Presentation</h1>
<h4 class="author">Eliot Spector</h4>
<h4 class="author">Farhad Dastmalchi</h4>
<h4 class="author">Laurence James-Woodley</h4>
<h4 class="author">Nitya Singh</h4>

</div>


<div id="introduction" class="section level3">
<h3>Introduction</h3>
<p>The goal of this project was to create a machine learning model that will be able to detect if if someone has diabetes or not.</p>
</div>
<div id="section" class="section level1 tabset">
<h1></h1>
<div id="data-extraction" class="section level2 tabset tabset-pills">
<h2>Data Extraction</h2>
<div id="identify-diabetes-codes" class="section level3">
<h3>Identify diabetes codes</h3>
<pre class="r"><code>sql &lt;- &quot;
select
    distinct condition_concept_id,
  concept_name,
  count(*) as ct
from
  condition_occurrence,
  concept
where
    condition_concept_id = concept.concept_id
    and concept_name like &#39;%diabete%&#39;
group by
    condition_concept_id
order by
    ct desc
&quot;

diabetes_codes &lt;- dbGetQuery(con, sql)</code></pre>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
Table 1
</caption>
<thead>
<tr>
<th style="text-align:right;">
condition_concept_id
</th>
<th style="text-align:left;">
concept_name
</th>
<th style="text-align:right;">
ct
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
201826
</td>
<td style="text-align:left;">
Type 2 diabetes mellitus
</td>
<td style="text-align:right;">
5713
</td>
</tr>
<tr>
<td style="text-align:right;">
40482801
</td>
<td style="text-align:left;">
Type II diabetes mellitus uncontrolled
</td>
<td style="text-align:right;">
957
</td>
</tr>
<tr>
<td style="text-align:right;">
201254
</td>
<td style="text-align:left;">
Type 1 diabetes mellitus
</td>
<td style="text-align:right;">
466
</td>
</tr>
<tr>
<td style="text-align:right;">
195771
</td>
<td style="text-align:left;">
Secondary diabetes mellitus
</td>
<td style="text-align:right;">
351
</td>
</tr>
<tr>
<td style="text-align:right;">
376065
</td>
<td style="text-align:left;">
Neurologic disorder associated with type 2 diabetes mellitus
</td>
<td style="text-align:right;">
300
</td>
</tr>
<tr>
<td style="text-align:right;">
443732
</td>
<td style="text-align:left;">
Disorder due to type 2 diabetes mellitus
</td>
<td style="text-align:right;">
264
</td>
</tr>
</tbody>
</table>
</div>
<div id="identify-cases-and-controls" class="section level3">
<h3>Identify cases and controls</h3>
<ol style="list-style-type: decimal">
<li>If subject had at least one of the diabetes codes in table 1 then that subject became a case</li>
<li>If subject had none of the diabetes codes in table 1 then subject became a control</li>
<li>Since the <code>condition_occurence</code> table is not unique by patient the data was arranged by <code>person_id</code>, <code>diabetes</code> and finally <code>condition_start_date</code>. If a subject did not have any of diabetes codes the earliest non-diabetes diagnosis for that subject by <code>condition_start_date</code> was used. If a subject had at least one diabetes diagnosis the first instance of a diabetes diagnosis by <code>condition_start_date</code> was used. These settings returned 930 subjects. <strong>These are the subjects that the demographics, medications, diagnosis and measurement values will extracted for.</strong></li>
</ol>
<pre class="r"><code>sql &lt;- &quot;
select
  person_id,
  concept_name,
  condition_start_date
from
  condition_occurrence
  left join concept on condition_concept_id = concept_id
&quot;
condition_occurence &lt;- dbGetQuery(con, sql)

diabetes_status &lt;- condition_occurence %&gt;%
  # if subject has at least one diabetes concept_name
  # then flag that subject as case
  mutate(diabetes = if_else(concept_name %in% diabetes_codes$concept_name, &quot;Case&quot;, &quot;Control&quot;)) %&gt;%
  # order by condition_start_date  to get the first occurrence of a diabetes diagnosis
  arrange(person_id,  diabetes, condition_start_date) %&gt;%
  distinct(person_id, .keep_all = T)</code></pre>
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
person_id
</th>
<th style="text-align:left;">
concept_name
</th>
<th style="text-align:left;">
condition_start_date
</th>
<th style="text-align:left;">
diabetes
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:left;">
Backache
</td>
<td style="text-align:left;">
2009-07-25
</td>
<td style="text-align:left;">
Control
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:left;">
Type 2 diabetes mellitus
</td>
<td style="text-align:left;">
2009-05-11
</td>
<td style="text-align:left;">
Case
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:left;">
Type 2 diabetes mellitus
</td>
<td style="text-align:left;">
2009-11-17
</td>
<td style="text-align:left;">
Case
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:left;">
Type 2 diabetes mellitus with hyperosmolar coma
</td>
<td style="text-align:left;">
2009-11-25
</td>
<td style="text-align:left;">
Case
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:left;">
Type 2 diabetes mellitus
</td>
<td style="text-align:left;">
2009-06-28
</td>
<td style="text-align:left;">
Case
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:left;">
Secondary diabetes mellitus
</td>
<td style="text-align:left;">
2009-12-21
</td>
<td style="text-align:left;">
Case
</td>
</tr>
</tbody>
</table>
</div>
<div id="medications" class="section level3">
<h3>Medications</h3>
<ol style="list-style-type: decimal">
<li>All medications taken within one year after the first diagnosis was queried from the <code>drug_era</code> table. We then filtered this dataset to get only the top 20 drugs for cases and the top 20 drugs for control.</li>
</ol>
<pre class="r"><code>sql &lt;- &quot;
select
  person_id,
  lower(concept_name) as drug,
  drug_era_start_date
from
  drug_era
  left join concept on drug_concept_id = concept_id
&quot;

drug_era &lt;- dbGetQuery(con, sql)

top_meds_by_diabetes_status &lt;- diabetes_status %&gt;%
  select(person_id, diabetes, condition_start_date) %&gt;%
  left_join(drug_era, by = &quot;person_id&quot;) %&gt;% 
  # get time between the date a drug was started and the date a diagnosis was provided
  mutate(time_since = time_length(difftime(
     drug_era_start_date, condition_start_date
  ), &quot;years&quot;)) %&gt;% 
  # filter to all medications taken within one year after condition_start_date
  filter(between(time_since, 0, 1)) %&gt;% 
  count(diabetes, drug) %&gt;% 
  group_by(diabetes) %&gt;% 
  # get the top n drugs by diabetes status
  top_n(20, wt = n) %&gt;% 
  ungroup() %&gt;%
  distinct(drug)

medications &lt;- drug_era %&gt;%
  inner_join(top_meds_by_diabetes_status, by = &quot;drug&quot;) %&gt;% 
  # tag the subject as being on drug
  mutate(on_drug = 1) %&gt;%
  # ensure that person drug combination is unique
  distinct(person_id, drug, .keep_all = T) %&gt;%
  pivot_wider(-drug_era_start_date,
              names_from = drug,
              values_from = on_drug,
              # tag subject as not on drug
              values_fill = 0) %&gt;% 
  clean_names()</code></pre>
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
person_id
</th>
<th style="text-align:right;">
amitriptyline
</th>
<th style="text-align:right;">
omeprazole
</th>
<th style="text-align:right;">
hydrochlorothiazide
</th>
<th style="text-align:right;">
acetaminophen
</th>
<th style="text-align:right;">
hydrocodone
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
</tr>
</tbody>
</table>
</div>
<div id="diagnoses" class="section level3">
<h3>Diagnoses</h3>
<ol style="list-style-type: decimal">
<li>All instances of diabetes codes was removed from <code>condition_era</code> table when filtering for diagnoses. This was to ensure that we did not include the diabetes diagnosis for any subject within the data used to construct the machine learning model.</li>
<li>All diagnoses one year before and after the first diabetes diagnosis for cases was queried. Additionally, all diagnoses one year after the first non-diabetes diagnosis for controls was queried. We then filtered this data set to get only the top 10 diagnoses for cases and the top 10 diagnoses for control.</li>
</ol>
<pre class="r"><code>sql &lt;- &quot;
select
  person_id,
  lower(concept_name) as diagnosis,
  condition_era_start_date
from
  condition_era
  left join concept on condition_concept_id = concept_id
where
  concept_name not like &#39;%diabete%&#39;
&quot;

condition_era &lt;- dbGetQuery(con, sql)

top_diagnoses &lt;- diabetes_status %&gt;%
  select(person_id, condition_start_date, diabetes) %&gt;%
  left_join(condition_era, by = &quot;person_id&quot;) %&gt;%
  mutate(time_since = time_length(
    difftime(condition_era_start_date, condition_start_date),
    &quot;years&quot;
  )) %&gt;% 
  # get all diagnosis one year before or after first diabetes diagnosis for cases
  # get all diagnosis one year after first non-diabetes diagnosis for controls
  filter(between(time_since, -1, 1)) %&gt;% 
  count(diabetes, diagnosis) %&gt;%
  group_by(diabetes) %&gt;%
  # get the top n diagnosis by diabetes status
  top_n(10, wt = n) %&gt;%
  ungroup() %&gt;%
  distinct(diagnosis)

diagnoses &lt;- condition_era %&gt;%
  inner_join(top_diagnoses, by = &quot;diagnosis&quot;) %&gt;%
  mutate(condition_present = 1) %&gt;%
  distinct(person_id, diagnosis, .keep_all = T) %&gt;%
  pivot_wider(-condition_era_start_date,
              names_from = diagnosis,
              values_from = condition_present,
              values_fill = 0) %&gt;% 
  clean_names()</code></pre>
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
person_id
</th>
<th style="text-align:right;">
low_back_pain
</th>
<th style="text-align:right;">
congestive_heart_failure
</th>
<th style="text-align:right;">
pure_hypercholesterolemia
</th>
<th style="text-align:right;">
shoulder_joint_pain
</th>
<th style="text-align:right;">
pain_in_limb
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
</tbody>
</table>
</div>
<div id="measurement" class="section level3">
<h3>Measurement</h3>
<p>Any measurement name of <code>lipid labs</code>, <code>basic metabolic panel</code> or <code>hemoglobin labs</code> that occurred 6 months before the <code>condition_start_date</code> were extracted as these are common lab panels used when screening for diabetes. If subject has taken any of these tests this can be a sign of a diabetes screening</p>
<pre class="r"><code>sql &lt;- &quot;
SELECT
  person_id,
  lower(concept_name) as measurement_name, 
  measurement_date 
FROM 
  measurement 
  left join concept on measurement_concept_id = concept_id
&quot;

measurement_table &lt;- dbGetQuery(con, sql)

# extract common tests for diabetes    
# https://www.mayoclinic.org/diseases-conditions/type-2-diabetes/diagnosis-treatment/drc-20351199
common_tests_for_diabetes &lt;- diabetes_status %&gt;%
  select(person_id, condition_start_date, diabetes) %&gt;%
  left_join(measurement_table, by = &quot;person_id&quot;) %&gt;%
  mutate(time_since = time_length(difftime(measurement_date, condition_start_date),
                                  &quot;years&quot;)) %&gt;%
  # get all measurements one year before first diabetes diagnosis for cases
  # get all measurementa one year before first non-diabetes diagnosis for controls
  filter(between(time_since, -0.5, 0)) %&gt;%
  filter(str_detect(measurement_name, &quot;^(lipid|basic metabolic|hemoglobin)&quot;)) %&gt;% 
  mutate(
    clean_measurement_name = case_when(
      str_detect(measurement_name, &quot;^lipid&quot;) ~ &quot;lipid_panel&quot;,
      str_detect(measurement_name, &quot;^basic&quot;) ~ &quot;basic_metabolic_panel&quot;,
      TRUE ~ &quot;a1c_test&quot;
    )) %&gt;% 
    distinct(measurement_name, clean_measurement_name)
    
measurements &lt;- measurement_table %&gt;%
  inner_join(common_tests_for_diabetes, by = &quot;measurement_name&quot;) %&gt;% 
  distinct(person_id, clean_measurement_name) %&gt;% 
  mutate(measurement_taken = 1) %&gt;%
  pivot_wider(names_from = clean_measurement_name,
              values_from = measurement_taken,
              values_fill = 0) </code></pre>
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
person_id
</th>
<th style="text-align:right;">
a1c_test
</th>
<th style="text-align:right;">
basic_metabolic_panel
</th>
<th style="text-align:right;">
lipid_panel
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
7
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
8
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
11
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:right;">
13
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
</div>
<div id="create-model-building-dataset" class="section level3">
<h3>Create model building dataset</h3>
<ol style="list-style-type: decimal">
<li>The <code>diabetes_status</code> table in <em>Identify cases and controls section</em> is the master data set.</li>
<li><code>demographics</code>, <code>medications</code>, <code>diagnosis</code> and <code>measurement</code> data was left joined to the master data set using <code>person_id</code> as primary key</li>
<li>if subject had no <code>medications</code>, <code>diagnosis</code>, or <code>measurement</code> data the missing values were replaced with 0</li>
</ol>
<pre class="r"><code>model_building_df &lt;- diabetes_status %&gt;%
  # left_join(demographics, by = &#39;person_id&#39;) %&gt;%
  left_join(medications, by = &quot;person_id&quot;) %&gt;%
  left_join(diagnoses, by = &quot;person_id&quot;) %&gt;%
  left_join(measurements, by = &quot;person_id&quot;) %&gt;% 
  # if subject has no medication or diagnosis data relpace NA with 0
  mutate_if(is.numeric, replace_na, 0) 

# write_csv(model_building_df, &quot;data/model_building_df_with_identifiers.csv&quot;)</code></pre>
<table class="table" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
diabetes
</th>
<th style="text-align:right;">
amitriptyline
</th>
<th style="text-align:right;">
omeprazole
</th>
<th style="text-align:right;">
hydrochlorothiazide
</th>
<th style="text-align:right;">
acetaminophen
</th>
<th style="text-align:right;">
hydrocodone
</th>
<th style="text-align:right;">
metoprolol
</th>
<th style="text-align:right;">
lisinopril
</th>
<th style="text-align:right;">
nifedipine
</th>
<th style="text-align:right;">
diltiazem
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Control
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Case
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Case
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
1
</td>
</tr>
<tr>
<td style="text-align:left;">
Case
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Case
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
Case
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="summary-statistics-and-traintest-creation" class="section level2 tabset tabset-pills">
<h2>Summary Statistics and Train/Test Creation</h2>
<div id="create-train-test-splits" class="section level3">
<h3>Create train test splits</h3>
<p>An 80-20 train-test split was conducted on the data. The split was stratified by diabetes status to achieve equal proportions of classes in each split.</p>
<pre class="r"><code>model_building_df &lt;- model_building_df %&gt;% 
  select(-c(person_id, concept_name, condition_start_date))

# set seed for reproducibility
set.seed(13)

# do stratified split on diabetes as data is imblanced
df_split &lt;- initial_split(model_building_df, strata = diabetes, prop = 0.8)
train_set &lt;- training(df_split)
test_set &lt;- testing(df_split)</code></pre>
</div>
<div id="train-set-summary-statistics" class="section level3">
<h3>Train set summary statistics</h3>
<pre class="r"><code>train_set %&gt;%
  tbl_summary(by = diabetes) %&gt;%
  add_overall(last = TRUE)</code></pre>
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#dqasgoioup .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#dqasgoioup .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dqasgoioup .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#dqasgoioup .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 4px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#dqasgoioup .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dqasgoioup .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#dqasgoioup .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#dqasgoioup .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#dqasgoioup .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#dqasgoioup .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#dqasgoioup .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#dqasgoioup .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#dqasgoioup .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#dqasgoioup .gt_from_md > :first-child {
  margin-top: 0;
}

#dqasgoioup .gt_from_md > :last-child {
  margin-bottom: 0;
}

#dqasgoioup .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#dqasgoioup .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#dqasgoioup .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dqasgoioup .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#dqasgoioup .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#dqasgoioup .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#dqasgoioup .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#dqasgoioup .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#dqasgoioup .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dqasgoioup .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#dqasgoioup .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#dqasgoioup .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#dqasgoioup .gt_left {
  text-align: left;
}

#dqasgoioup .gt_center {
  text-align: center;
}

#dqasgoioup .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#dqasgoioup .gt_font_normal {
  font-weight: normal;
}

#dqasgoioup .gt_font_bold {
  font-weight: bold;
}

#dqasgoioup .gt_font_italic {
  font-style: italic;
}

#dqasgoioup .gt_super {
  font-size: 65%;
}

#dqasgoioup .gt_footnote_marks {
  font-style: italic;
  font-size: 65%;
}
</style>
<div id="dqasgoioup" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;"><table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1"><strong>Characteristic</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Case</strong>, N = 617<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Control</strong>, N = 128<sup class="gt_footnote_marks">1</sup></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_center" rowspan="1" colspan="1"><strong>Overall</strong>, N = 745<sup class="gt_footnote_marks">1</sup></th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr>
      <td class="gt_row gt_left">amitriptyline</td>
      <td class="gt_row gt_center">189 (31%)</td>
      <td class="gt_row gt_center">43 (34%)</td>
      <td class="gt_row gt_center">232 (31%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">omeprazole</td>
      <td class="gt_row gt_center">198 (32%)</td>
      <td class="gt_row gt_center">39 (30%)</td>
      <td class="gt_row gt_center">237 (32%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">hydrochlorothiazide</td>
      <td class="gt_row gt_center">316 (51%)</td>
      <td class="gt_row gt_center">79 (62%)</td>
      <td class="gt_row gt_center">395 (53%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">acetaminophen</td>
      <td class="gt_row gt_center">342 (55%)</td>
      <td class="gt_row gt_center">81 (63%)</td>
      <td class="gt_row gt_center">423 (57%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">hydrocodone</td>
      <td class="gt_row gt_center">232 (38%)</td>
      <td class="gt_row gt_center">61 (48%)</td>
      <td class="gt_row gt_center">293 (39%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">metoprolol</td>
      <td class="gt_row gt_center">199 (32%)</td>
      <td class="gt_row gt_center">50 (39%)</td>
      <td class="gt_row gt_center">249 (33%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">lisinopril</td>
      <td class="gt_row gt_center">266 (43%)</td>
      <td class="gt_row gt_center">68 (53%)</td>
      <td class="gt_row gt_center">334 (45%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">nifedipine</td>
      <td class="gt_row gt_center">164 (27%)</td>
      <td class="gt_row gt_center">47 (37%)</td>
      <td class="gt_row gt_center">211 (28%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">diltiazem</td>
      <td class="gt_row gt_center">194 (31%)</td>
      <td class="gt_row gt_center">55 (43%)</td>
      <td class="gt_row gt_center">249 (33%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">amlodipine</td>
      <td class="gt_row gt_center">176 (29%)</td>
      <td class="gt_row gt_center">43 (34%)</td>
      <td class="gt_row gt_center">219 (29%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">enalapril</td>
      <td class="gt_row gt_center">162 (26%)</td>
      <td class="gt_row gt_center">51 (40%)</td>
      <td class="gt_row gt_center">213 (29%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">propranolol</td>
      <td class="gt_row gt_center">228 (37%)</td>
      <td class="gt_row gt_center">51 (40%)</td>
      <td class="gt_row gt_center">279 (37%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">levothyroxine</td>
      <td class="gt_row gt_center">292 (47%)</td>
      <td class="gt_row gt_center">71 (55%)</td>
      <td class="gt_row gt_center">363 (49%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">metformin</td>
      <td class="gt_row gt_center">212 (34%)</td>
      <td class="gt_row gt_center">44 (34%)</td>
      <td class="gt_row gt_center">256 (34%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">simvastatin</td>
      <td class="gt_row gt_center">282 (46%)</td>
      <td class="gt_row gt_center">64 (50%)</td>
      <td class="gt_row gt_center">346 (46%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">atorvastatin</td>
      <td class="gt_row gt_center">211 (34%)</td>
      <td class="gt_row gt_center">45 (35%)</td>
      <td class="gt_row gt_center">256 (34%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">glyburide</td>
      <td class="gt_row gt_center">184 (30%)</td>
      <td class="gt_row gt_center">42 (33%)</td>
      <td class="gt_row gt_center">226 (30%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">glipizide</td>
      <td class="gt_row gt_center">157 (25%)</td>
      <td class="gt_row gt_center">38 (30%)</td>
      <td class="gt_row gt_center">195 (26%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">lovastatin</td>
      <td class="gt_row gt_center">254 (41%)</td>
      <td class="gt_row gt_center">61 (48%)</td>
      <td class="gt_row gt_center">315 (42%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">oxygen</td>
      <td class="gt_row gt_center">254 (41%)</td>
      <td class="gt_row gt_center">64 (50%)</td>
      <td class="gt_row gt_center">318 (43%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">theophylline</td>
      <td class="gt_row gt_center">158 (26%)</td>
      <td class="gt_row gt_center">26 (20%)</td>
      <td class="gt_row gt_center">184 (25%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">furosemide</td>
      <td class="gt_row gt_center">207 (34%)</td>
      <td class="gt_row gt_center">44 (34%)</td>
      <td class="gt_row gt_center">251 (34%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">dipyridamole</td>
      <td class="gt_row gt_center">185 (30%)</td>
      <td class="gt_row gt_center">24 (19%)</td>
      <td class="gt_row gt_center">209 (28%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">sodium_chloride</td>
      <td class="gt_row gt_center">195 (32%)</td>
      <td class="gt_row gt_center">23 (18%)</td>
      <td class="gt_row gt_center">218 (29%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">low_back_pain</td>
      <td class="gt_row gt_center">375 (61%)</td>
      <td class="gt_row gt_center">22 (17%)</td>
      <td class="gt_row gt_center">397 (53%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">congestive_heart_failure</td>
      <td class="gt_row gt_center">376 (61%)</td>
      <td class="gt_row gt_center">17 (13%)</td>
      <td class="gt_row gt_center">393 (53%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">pure_hypercholesterolemia</td>
      <td class="gt_row gt_center">478 (77%)</td>
      <td class="gt_row gt_center">23 (18%)</td>
      <td class="gt_row gt_center">501 (67%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">shoulder_joint_pain</td>
      <td class="gt_row gt_center">206 (33%)</td>
      <td class="gt_row gt_center">14 (11%)</td>
      <td class="gt_row gt_center">220 (30%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">pain_in_limb</td>
      <td class="gt_row gt_center">389 (63%)</td>
      <td class="gt_row gt_center">12 (9.4%)</td>
      <td class="gt_row gt_center">401 (54%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">hypothyroidism</td>
      <td class="gt_row gt_center">442 (72%)</td>
      <td class="gt_row gt_center">21 (16%)</td>
      <td class="gt_row gt_center">463 (62%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">atrial_fibrillation</td>
      <td class="gt_row gt_center">434 (70%)</td>
      <td class="gt_row gt_center">20 (16%)</td>
      <td class="gt_row gt_center">454 (61%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">nuclear_senile_cataract</td>
      <td class="gt_row gt_center">274 (44%)</td>
      <td class="gt_row gt_center">24 (19%)</td>
      <td class="gt_row gt_center">298 (40%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">anemia</td>
      <td class="gt_row gt_center">423 (69%)</td>
      <td class="gt_row gt_center">25 (20%)</td>
      <td class="gt_row gt_center">448 (60%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">urinary_tract_infectious_disease</td>
      <td class="gt_row gt_center">381 (62%)</td>
      <td class="gt_row gt_center">18 (14%)</td>
      <td class="gt_row gt_center">399 (54%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">malaise_and_fatigue</td>
      <td class="gt_row gt_center">424 (69%)</td>
      <td class="gt_row gt_center">13 (10%)</td>
      <td class="gt_row gt_center">437 (59%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">coronary_arteriosclerosis_in_native_artery</td>
      <td class="gt_row gt_center">378 (61%)</td>
      <td class="gt_row gt_center">13 (10%)</td>
      <td class="gt_row gt_center">391 (52%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">actinic_keratosis</td>
      <td class="gt_row gt_center">240 (39%)</td>
      <td class="gt_row gt_center">13 (10%)</td>
      <td class="gt_row gt_center">253 (34%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">chest_pain</td>
      <td class="gt_row gt_center">405 (66%)</td>
      <td class="gt_row gt_center">24 (19%)</td>
      <td class="gt_row gt_center">429 (58%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">a1c_test</td>
      <td class="gt_row gt_center">379 (61%)</td>
      <td class="gt_row gt_center">13 (10%)</td>
      <td class="gt_row gt_center">392 (53%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">basic_metabolic_panel</td>
      <td class="gt_row gt_center">400 (65%)</td>
      <td class="gt_row gt_center">19 (15%)</td>
      <td class="gt_row gt_center">419 (56%)</td>
    </tr>
    <tr>
      <td class="gt_row gt_left">lipid_panel</td>
      <td class="gt_row gt_center">467 (76%)</td>
      <td class="gt_row gt_center">27 (21%)</td>
      <td class="gt_row gt_center">494 (66%)</td>
    </tr>
  </tbody>
  
  <tfoot>
    <tr class="gt_footnotes">
      <td colspan="4">
        <p class="gt_footnote">
          <sup class="gt_footnote_marks">
            <em>1</em>
          </sup>
           
          Statistics presented: n (%)
          <br />
        </p>
      </td>
    </tr>
  </tfoot>
</table></div>
</div>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
