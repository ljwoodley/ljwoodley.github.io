---
title: "An Application of Poisson Distribution"
author: "Laurence James-Woodley"
output: 
   html_document 
          
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

###Background

A local testing center, accommodates a bi-weekly computerized psychology test. The test occurs on Monday and Friday from 7:30 pm to 9:30 pm. On reviewing the data for the last 25 Fridays, on which the test was available, the manager noticed that the number of people that took the test was drastically lower than the number of people that took the test on Monday of the same week. It is costly to hire a proctor for this test so the manager is considering making the test available only on Mondays. The testing center can accommodate a maximum of 20 people and receives a fee of \$25 for every person that takes the test. The proctor is paid an hourly rate of \$10. As per the employee rules, the proctor must arrive 15 minutes before the exam to check in candidates, and spend an additional 15 minutes after the exam collecting exams and completing reports. The manager has decided that he will cancel the test, on Fridays, if the chance that the testing center makes a profit of $100 or more, on any given Friday, is below 75%. The number of people that took the test on the last 25 Fridays is
            
             10  8  9  9  2 10  9  3  0  5  1  8  9  5  4  8  9  7  5  2  9 10  9  4  3

How can we calculate the probability that the testing center makes a profit of at least $100, on any given Friday, using the given information?


###Algebra
Before we begin thinking about how to determine the probability of making a profit, we need to find out how many people are needed in order to make a profit of at least \$100. Based on the information, we know that the test lasts for 2 hours and that the proctor is required to work an additional 30 minutes. Thus, the proctor is paid $25 for each session.

Now let's consider $c$ to be the amount of money that's paid to the proctor and $(p)$ as the amount of money the testing center receives per candidate. Also, let $x$ represent the number of candidates taking the exam and let $P$ be the profit. Then, using the profit function to solve for $x$:

$$P(x) = px - c$$

$$100 = 25x -25$$

$$x = 5$$



We are able to determine that at least five people must take the exam on any given Friday for the testing center to make a profit of $100.


###Statistical Framework
Note, that on any given Friday, the number of individuals, N, in the area is large. Additionally, on any given Friday, person $i$ has probability $p_i$ of taking the psychology test. Also, all the $p_i$'s  are small since most individuals will not take a test at all, and for those who do, the chance that they take this specific psychology test, at this testing center is small. Let $X$ be the total number of individuals taking a test on that day. Thus, $X$ is the sum of $N$ independent Bernoullis, each having small probability of success. Therefore, the distribution of $X$ is approximately Poisson, with parameter $\lambda$. The probability that at least five people take the test resolves to
    
    
   $$P(X\geqslant 5 ) = 1-\exp(-\lambda)\frac{\lambda^0}{0!}-\exp(-\lambda)\frac{\lambda^1}{1!}-\exp(-\lambda)\frac{\lambda^2}{2!}-\exp(-\lambda)\frac{\lambda^3}{3!}-\exp(-\lambda)\frac{\lambda^4}{4!}$$
   
Unfortunately, we need to estimate $\lambda$. Let $X_i$ be the total number of cases for Friday $i$. Then $X_1...X_{25}$ will be the number of people taking the psychology test on Friday $i$. Additionally, the $X_i$'s are independent and are all Poisson with the same $\lambda$. Furthermore, the mean of the Poisson distribution is $\lambda$, i.e. $E(X_i)=\lambda$ and the Law of Averages state that with high probability $\bar{X}$ is close to $\lambda$, so we can estimate $\lambda$ by using $\bar{X}$.

Now that the framework has been established, let's do the necessary calculations in R.
```{r message=FALSE, warning=FALSE, paged.print=FALSE}
#make a vector of the values
count <- c(10,  8,  9,  9,  2, 10,  9,  3,  0,  5,  1,  8,  9,  5,  4,  8,  9,  7,
       5,  2,  9, 10,  9,  4,  3)

#calculate the mean
x_bar <- mean(count)

#apply the poisson function
ppois(5, lambda=x_bar, lower=F)
```

The chance that the testing center makes a profit of at least $100, on any given Friday, is 60.4%. 

###Conclusion
This problem shows how the Poisson Distribution can be used to solve common problems. Note that this framework only worked because the number of people, $N$, in the area is large and the number of Fridays is also large. This is crucial, as the number of Fridays needs to be large enough to apply the Law of Averages, which states that $\bar{X}$ is close to $\lambda$, and therefore, $\exp(-\bar{X})$ is, with high probability, very close to $\exp(-\lambda)$.
 